<html>
    <head>
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.1/css/responsive.bootstrap4.min.css"/>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>
        <script type="text/javascript">
            if (!String.prototype.format) {
              String.prototype.format = function() {
                var args = arguments;
                return this.replace(/{(\d+)}/g, function(match, number) {
                  return typeof args[number] != 'undefined'
                    ? args[number]
                    : match
                  ;
                });
              };
            }
            var urltemplate = '<a href="http://genome.ucsc.edu/cgi-bin/hgTracks?db=hg19&position={0}:{1}-{2}&hgt.customText=http://meltonlab.rc.fas.harvard.edu/data/UCSC/SCbetaCellDiff_ATAC_H3K4me1_H3K27ac_WGBS_tracks.txt">{3}</a>';
            // Render the ID column
            // Inserts spaces around pipes and adds the href property
            var renderIdCol = function(data, type, row, meta){
                if (data) {
                   return urltemplate.format(row[0], row[1], row[2], data.replace(/\|/g, " | "));
                }
            }
            var replacePipes = function(data, type, row, meta){
                if (data) {
                    return data.replace(/\|/g, " | ");
                }
            }
            $(document).ready(function(){
                $("#datatable").DataTable( {
                    ajax:       "data.json",
                    dataSrc:    "data",
                    pageLength: 5000,
                    dom:        "pftp",
                    columns: [
                        {"title" : "Chromosome"},
                        {"title" : "Start"},
                        {"title" : "End"},
                        {"title" : "ID", "render" : renderIdCol},
                        {"title" : "closesst_NM_TS", "render" : replacePipes}
                    ]
                } );
                // $.getJSON("data.json", function(data){
                //     var items = data.data;
                //     var tblbody = $("#datatable tbody");
                //     $.each(items, function(key, val){
                //         // console.log(val);
                //         $(tblbody).append("<tr><td>" + val.join("</td><td>") + "</td></tr>");
                //     });
                // });
            });
        </script>
    </head>
    <body>
        <div>
            <div class="main_container">
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h2>Melton lab stuff</h2>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content" style="width: 100%">
                                <table id="datatable">
                                    <thead>
                                        <th>Chromosome</th>
                                        <th>Start</th>
                                        <th>End</th>
                                        <th>ID</th>
                                        <th>closesst_NM_TS</th>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>